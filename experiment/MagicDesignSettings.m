function [design] = MagicDesignSettings(log)
% VP, PRG 11/2019

% Get the counter balanced designs for all participants.
load('CounterBalancedSubjects.mat')

% Get the corresponding matrix for your subject
if str2num(log.run) == 3
     design.Tricks = design.Tricks(:,str2num(log.block),str2num(log.subjNr));
     design.Revealing = design.Revealing(:,str2num(log.block),str2num(log.subjNr));
else
    design.Condition = design.Condition(:,str2num(log.block),str2num(log.subjNr));
    design.Condition = ReorderNoReps(design.Condition);
end

if strcmp (log.isGerman, 'y')
    design.Introduction =       ['Vielen Dank dass du an unserer Studie teilnimmst\n\n'...
        'Drücke eine beliebigen Knopf um fortzufahren'];
    design.Instruction1 =       ['Im Folgenden zeigen wir einige Videos.\n'...
        'Manche sind Zaubertricks und manche nicht.\n'...
        'Drücke eine beliebigen Knopf um fort zufahren'];
%         'Am Ende jedes Videos fragen wir, ob du Magie gesehen hast oder nicht.\n'...%'Drücke den Knopf an deinem Zeigefinger falls ja, den an deinem Mittelfinger falls nicht.\n\n'...
%         'Druecke / falls ja und * falls nicht.'...
    design.Instruction2 =       ['Danach sollst du bewerten, wie überraschend du den Inhalt des Videos fandest.\n'...
        'Die Bewertung geht von 1 - 5, wobei 1 gar nicht überraschend und 5 sehr überraschend ist.\n'...%'Die 1 liegt auf deinem Daumen und die 5 auf deinem kleinen Finger\n'...
        'Für beide Fragen hast du genau 2 Sekunden Zeit. Beantworte so schnell wie möglich.\n'...
        'Die Fragen verschwinden erst nach 2s.\n' ...
        'Manche der Videos werden sich wiederholen.\n\n'...
        'Drücke eine beliebigen Knopf um fortzufahren'];
    design.Instruction3 =       ['1) Bitte bleib über den gesamten Zeitraum des Experiments konzentriert. \n' ...
        '2) Bitte nicht bewegen. \n\n' ...
        'Es geht gleich los...\n\n'...
        'Druecke einen Knopf um zu beginnen.'];
    design.WasMagic =           ['Hast du einen Zaubertrick gesehen?\n '...
        'Druecke / falls JA und * falls NEIN'];
    design.HowSurprising =      'Wie ueberraschend fandest du den Inhalt des Videos (1-5)';
    design.RevealingsWillBeShown = ['Die erste Hälfte dieses Blocks ist nun fertig.\n'...
        'Nun zeigen wir dir die Auflösung der Zaubertricks\n\n'...
        'Druecke einen Knopf um zu beginnen.'];
    design.TrickUnderstood =    ['Hast du verstanden wie der Zaubertrick funktioniert?\n\n'...
        '(Daumen: ja\t Mittelfinger: nein)'];
    design.RunIsOver =          'Der Run ist nun vorbei. \nDanke sehr.';
    design.BlockIsOver =        'Der Block ist nun vorbei.';
else
    %% English version of instructions
    design.Introduction =       ['Thank you very much for participating in our study.\n\n'...
        'Press a botton to proceed.'];
    design.Instruction1 =       ['We are going to show you some Videos.\n'...
        'Please press the / button if yes and the * button if not.\n\n'...
        'Press a botton to proceed'];
%         'Some of them will be videos of magic tricks others will not.\n'...
%         'At the end of every video, we will ask you wheather or not you have seen magic.\n'...
    design.Instruction2 =       ['Afterwards you shall rate, how surprisive the video`s content was.\n'...
        'The rating ranges from 1 - 5, whereas 1 is not surprisive at all and 5 is very surprisive.\n'...
        'You have 2 seconds for every question. Please answer as fast as possible.\n'...
        'Regardless of your answer, the questions only vanish after 2 seconds.\n'...
        'Some of the videos may repeat.\n\n'...
        'Press a botton to proceed.'];
    design.Instruction3 =       ['1) Please stay concentrated for the whole experiment.\n'...
        '2) Please do not move your head.\n\n'...
        'It will soon begin.\n\n'...
        'Press a botton to proceed'];
    design.WasMagic =           ['Have you seen a magic trick?\n'...
        'Press / if YES and * if NO'];
    design.HowSurprising =      'How surprisive was the video`s content? (1 - 5)';
    design.RevealingsWillBeShown = ['The first half of this block is over.\n'...
        'We are now going to show you the revelations.\n\n'...
        'Press a botton to proceedw'];
    design.TrickUnderstood =    ['Do you understand how the magic trick works?\n\n'...
        '(Thumb: yes\t Middle finger: no)'];
    design.RunIsOver =          'This run is now over';
    design.BlockIsOver =        'This block is over';
end
design.nDummies =5;
end



% OLD ALTERNATIVE TO INCLUDE THE FLIPPED VIDEOS. PLEASE CONSIDER A BETTER
% SOLUTION IF YOU HAPPEN TO HAVE TIME...
% for i = 1:length(design.Condition)
%     tmpCopy(i) = design.Condition(i); %#ok<AGROW>
%     if sum(contains(tmpCopy,design.Condition(i))) == 2
%        tmpCopy(i) = strcat (tmpCopy(i), "_F"); %#ok<AGROW>
%     end    
% end
